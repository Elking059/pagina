"use strict";function openTask(id){var taskWrapper=$(".game-actions-wrapper");var taskClass="hover-"+id;var taskElement=taskWrapper.find("[data-task-id='"+id+"']");var taskContent=taskElement.find(".task-content");var taskNumber=taskElement.find(".task-number");var taskBtnHelper=taskContent.find(".btn-wrapper");if(!detectmob()){var taskBtn={width:taskBtnHelper.width()?taskBtnHelper.width():-16,height:taskBtnHelper.height()?taskBtnHelper.height():0};closeAllTasks(taskWrapper);taskWrapper.addClass(taskClass);var expectedWidth=taskContent.find("span.text-holder").width()+taskBtn.width+taskNumber.width()+32+(taskNumber.width()-taskBtn.height)/2;taskContent.css("width",expectedWidth);taskNumber.css("transform","translateX("+(-expectedWidth+taskNumber.width())+"px)");$(".header .top-container").addClass("contains-expanded");}else{var taskContainer=$(".mobile-task-holder");taskWrapper.addClass(taskClass);taskNumber.addClass("active");taskContainer.append(taskContent[0].innerHTML);taskContainer.addClass("has-task");}}
function closeAllTasks(){var taskWrapper=$(".game-actions-wrapper");taskWrapper.attr("class","game-actions-wrapper");if(!detectmob()){taskWrapper.find(".task-content").attr("style","");taskWrapper.find(".task-number").attr("style","");$(".header .top-container").removeClass("contains-expanded");}else{var taskContainer=$(".mobile-task-holder");taskContainer.attr("class","mobile-task-holder");taskContainer.empty();taskWrapper.find(".task-number").removeClass("active");}}
function closeTask(id){var taskWrapper=$(".game-actions-wrapper");var taskClass="hover-"+id;var taskElement=taskWrapper.find("[data-task-id='"+id+"']");var taskContent=taskElement.find(".task-content");var taskNumber=taskElement.find(".task-number");taskWrapper.removeClass(taskClass);if(!detectmob()){taskContent.attr("style","");taskNumber.attr("style","");$(".header .top-container").removeClass("contains-expanded");}else{var taskContainer=$(".mobile-task-holder");taskContainer.attr("class","mobile-task-holder");taskContainer.empty();taskNumber.removeClass("active");}}
function isTaskOpen(id){var taskWrapper=$(".game-actions-wrapper");return taskWrapper.hasClass("hover-"+id);}
$(document).ready(function(){setTimeout(function(){if(typeof availableTask!="undefined"&&availableTask>0){openTask(availableTask);}},500);$(document).click(function(event){if(!$(event.target).closest(".task").length){if($(event.target).length&&$(event.target).closest(".header").length){if(!$(event.target)[0].className.hasOwnProperty("indexOf")&&$(event.target)[0].className.indexOf("btn-play")==-1){closeAllTasks();}else{if($(event.target)[0].className.indexOf("guide-suggestion")==-1&&$(event.target)[0].className.indexOf("btn-play")==-1){closeAllTasks();}}}}});$(".game-actions-wrapper .task .task-number").click(function(e){if($(this).hasClass('locked')){return false;}
var id=$(this).parent().data("task-id");if(isTaskOpen(id)){closeTask(id);}else{openTask(id);}});if($(".screen-gallery").length){var owl=$('.owl-carousel');owl.owlCarousel({loop:true,center:true,lazyLoad:true,startPosition:2,nav:false,dots:false,mouseDrag:true,pullDrag:true,touchDrag:true,responsive:{0:{items:1},480:{items:3},768:{items:5}}});$('#carousel-prev').click(function(){owl.trigger('prev.owl.carousel');});$('#carousel-next').click(function(){owl.trigger('next.owl.carousel');});lightGallery(document.getElementById("game-gallery"),{selector:".gallery-item",youtubePlayerParams:{autoplay:1}});}
$('[href="#single-game-info"]').on("shown.bs.tab",function(e){$(".screen-gallery").resize();});function handleFancyTabs(){var gameHeader=$(".page-single-game .header");var navTabs=$(".page-single-game .nav-tabs");var navLinks=navTabs.find(".nav-link");var tabWidth=$(".nav-tabs .nav-item").width();var navOffsetY=-(gameHeader.height()-navTabs.height());var navOffsetX=(gameHeader.width()-navLinks.length*tabWidth)/-2;navLinks.each(function(index){var $this=$(this);var tabOffsetX=-(index*tabWidth)+navOffsetX;var setPosition=tabOffsetX+"px "+navOffsetY+"px";$(this).find(".bg-helper").css("background-size",gameHeader.width()).css("background-position",setPosition);});$(".page-single-game .content-bg").css("background-position","0 "+-gameHeader.height()+"px");}
handleFancyTabs();$(window).resize(function(){waitForFinalEvent(function(){handleFancyTabs();},100,"fancy-game-tabs-handle-event");});$(window).resize(function(){waitForFinalEvent(function(){closeAllTasks();},100,"responsive-task-handle-event");});});